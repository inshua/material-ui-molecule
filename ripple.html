<!doctype html>
<html>

<head>
    <script>
        var process = {
            env: {
                NODE_ENV: 'dev'
            }
        };
        var global = window
    </script>

    <script src="jslib/jquery-3.3.1.js"></script>
    <script src="jslib/jss/dist/jss.js"></script>

    <script src="jslib/jss-global/dist/jss-global.js"></script>
    <script src="jslib/jss-nested/dist/jss-nested.js"></script>
    <script src="jslib/jss-camel-case/dist/jss-camel-case.js"></script>
    <script src="jslib/jss-default-unit/dist/jss-default-unit.js"></script>
    <script src="jslib/jss-vendor-prefixer/dist/jss-vendor-prefixer.js"></script>
    <script src="jslib/jss-props-sort/dist/jss-props-sort.js"></script>
    <script src="jslib/classnames/index.js"></script>

    <script src="jslib/jquery.attrs.js"></script>
    <script src="jslib/@material-ui-molecule/jss.js" type="module"></script>
    <script src="jslib/molecule.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <molecule src="jslib/@material-ui-molecule/svg-icons.html"></molecule>
</head>

<body>
    <template>
        <span m-def=mui.TouchRipple>
            <script constructor module="/jslib/@material-ui-molecule/core/ButtonBase/TouchRippleMolecule.js"></script>
        </span>
        <span m-def=mui.Ripple>
            <span></span>
            <script constructor module="/jslib/@material-ui-molecule/core/ButtonBase/RippleMolecule.js"></script>
        </span>
        <button m-def=mui.Button>
            <span>
                <molecule-placeholder></molecule-placeholder>
            </span>
            <script constructor module="/jslib/@material-ui-molecule/core/Button/ButtonMolecule.js"></script>
        </button>

        <div m-def=TextButtons>
            <button m=mui.Button watch-attr>Default</Button>
            <button m=mui.Button color="primary" watch-attr>
                Primary
            </button>
            <button m=mui.Button color="secondary">
                Secondary
            </button>
            <button m=mui.Button disabled>
                Disabled
            </button>
            <a m=mui.Button href="#text-buttons">
                Link
            </a>
            <input accept="image/*" id="flat-button-file" multiple type="file" />
            <label for="flat-button-file">
                <span m=mui.Button>
                    Upload
                </span>
            </label>
            <script constructor>
                // const styles = theme => ({
                //     [`@global [m-inst=${this.moleculeName()}] button`]: {
                //         margin: theme.spacing.unit,
                //     },
                //     [`@global [m-inst=${this.moleculeName()}] input`]: {
                //         display: 'none',
                //     },
                // });
                // this.attachJss(styles);
                const styles = theme => ({
                    button: {
                        margin: [theme.spacing.unit, '!important'],     // 比按钮的 style 创建的早，会被覆盖
                    },
                    input: {
                        display: 'none',
                    },
                });
                let classes = this.attachJss(styles);
                this.$el.find('button').attr('m-class', classes.button);
                this.$el.find('input').addClass(classes.input);
            </script>
        </div>

        <div m-def=OutlinedButtons>
            <button m=mui.Button variant="outlined">Default</Button>
            <button m=mui.Button color="primary" variant="outlined">
                Primary<svg m=icon.AccessibilityRounded></svg>
            </button>
            <button m=mui.Button color="secondary" variant="outlined">
                Secondary
            </button>
            <button m=mui.Button disabled variant="outlined">
                Disabled
            </button>
            <a m=mui.Button href="#outlined-buttons" variant="outlined">
                Link
            </a>
            <input accept="image/*" id="flat-button-file" multiple type="file" />
            <label for="flat-button-file">
                <span m=mui.Button variant="outlined">
                    Upload
                </span>
            </label>
            <script constructor>
                const styles = theme => ({
                    [`@global [m-inst=${this.moleculeName()}] button`]: {
                        margin: theme.spacing.unit,
                    },
                    [`@global [m-inst=${this.moleculeName()}] input`]: {
                        display: 'none',
                    },
                });
                this.attachJss(styles);
            </script>
        </div>
    </template>

    <!-- <span molecule=mui.TouchRipple rippleX=200 rippleY=200 rippleSize=200>TouchRipple</span> -->
    <!-- <input value="abcd">
    <button m=mui.Button>
        CLICK ME
    </button>

    <button m=mui.Button color=primary variant="contained">
        CLICK ME
    </button> -->

    <div theme="dark" style="background: darkslategray">
        <div m=TextButtons>

        </div>
    </div>

    <div m=OutlinedButtons>

    </div>
</body>
<script>
    (async function(){
        console.log('add dark theme')
        const jss = await import('/jslib/@material-ui-molecule/jss.js');
        const createMuiTheme = await import('/jslib/@material-ui-molecule/core/styles/createMuiTheme.js');
        const theme = createMuiTheme.default({
            palette: {
                type: 'dark', // Switching the dark mode on is a single property value change.
            },
        });
        jss.themes['dark'] = theme;
        console.log('dark theme added')
    })();
</script>
</html>